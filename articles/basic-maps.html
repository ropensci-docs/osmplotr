<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Basic Maps • osmplotr</title>
<!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Basic Maps">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">osmplotr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.5.006</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/osmplotr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Basic Maps</h1>
                        <h4 data-toc-skip class="author">Mark
Padgham</h4>
            
            <h4 data-toc-skip class="date">2024-10-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/osmplotr/blob/master/vignettes/basic-maps.Rmd" class="external-link"><code>vignettes/basic-maps.Rmd</code></a></small>
      <div class="d-none name"><code>basic-maps.Rmd</code></div>
    </div>

    
    
<p>The <strong>R</strong> package <code>osmplotr</code> uses
OpenStreetMap (OSM) data to produce highly customisable maps. Data are
downloaded via the <a href="https://cran.r-project.org/package=osmdata" class="external-link"><code>osmdata</code>
package</a>, and different aspects of map data - such as roads,
buildings, parks, or water bodies - are able to be visually customised.
This vignette demonstrates both data downloading and the creation of
simple maps. The subsequent vignette (<a href="https://cran.r-project.org/package=osmplotr" class="external-link">‘data-maps’</a>)
demonstrates how <code>osmplotr</code> enables user-defined data to be
visualised using OSM data. The maps in this vignette represent a small
portion of central London, U.K.</p>
<div class="section level2">
<h2 id="introduction">1. Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>A map can be generated using the following simple steps:</p>
<ol style="list-style-type: decimal">
<li>Specify the bounding box for the desired region</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_bbox.html">get_bbox</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="op">-</span><span class="fl">0.13</span>, <span class="fl">51.51</span>, <span class="op">-</span><span class="fl">0.11</span>, <span class="fl">51.52</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Download the desired data—in this case, all building
perimeters.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_B</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"building"</span>, bbox <span class="op">=</span> <span class="va">bbox</span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Initiate an <code>osm_basemap</code> with desired background
(<code>bg</code>) colour</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osm_basemap.html">osm_basemap</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">bbox</span>, bg <span class="op">=</span> <span class="st">"gray20"</span><span class="op">)</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Add desired plotting objects in the desired colour.</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> <span class="op">(</span><span class="va">map</span>, <span class="va">dat_B</span>, col <span class="op">=</span> <span class="st">"gray40"</span><span class="op">)</span></span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Print the map</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></code></pre></div>
<p><img src="map_a1.png"></p>
<p>The function <code>print_osm_map</code> creates a graphics device
that is scaled to the bounding box of the map. Note also that
<code>osmplotr</code> maps contain no margins and fill the entire plot
area, reflecting the general layout of most printed maps. Additional
capabilities of <code>osmplotr</code> are described in the following
sections, beginning with downloading and extraction of data.</p>
</div>
<div class="section level2">
<h2 id="downloading-data">2. Downloading Data<a class="anchor" aria-label="anchor" href="#downloading-data"></a>
</h2>
<p>The package <a href="https://cran.r-project.org/package=osmdata" class="external-link"><code>osmdata</code></a>
is used to download data from ‘OpenStreetMap’ using the ‘overpass’ API
<a href="https://overpass-api.de" class="external-link">overpass API</a>. Data may be returned
in either <a href="https://cran.r-project.org/package=sf" class="external-link">‘Simple
Features’ (<code>sf</code>)</a> or <a href="https://cran.r-project.org/package=sp" class="external-link">‘R Spatial’
(<code>sp</code>)</a> form. <code>osmplotr</code> has a convenience
function, <code>extract_osm_objects</code>, to allow direct import, or
the functions of <a href="https://cran.r-project.org/package=osmdata" class="external-link"><code>osmdata</code></a>
can also be used directly.</p>
<p>Data of a particular type can be extracted by specifying the
appropriate OSM <code>key</code>, as in the above example:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_bbox.html">get_bbox</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="op">-</span><span class="fl">0.13</span>, <span class="fl">51.51</span>, <span class="op">-</span><span class="fl">0.11</span>, <span class="fl">51.52</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dat_B</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"building"</span>, bbox <span class="op">=</span> <span class="va">bbox</span><span class="op">)</span></span>
<span><span class="va">dat_H</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"highway"</span>, bbox <span class="op">=</span> <span class="va">bbox</span><span class="op">)</span></span></code></pre></div>
<p>These objects are of appropriate <code>Spatial</code> classes:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span> <span class="op">(</span><span class="va">dat_B</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "sf"         "data.frame"</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span> <span class="op">(</span><span class="va">dat_H</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "sf"         "data.frame"</span></span></code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span> <span class="op">(</span><span class="va">dat_B</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "sfc_POLYGON" "sfc"</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span> <span class="op">(</span><span class="va">dat_H</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "sfc_LINESTRING" "sfc"</span></span></code></pre>
<p><code>Spatial</code> (<a href="https://cran.r-project.org/package=sf" class="external-link"><code>sp</code></a>)
objects may be returned with,</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_B</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"building"</span>, bbox <span class="op">=</span> <span class="va">bbox</span>, sf <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>otherwise <code>sf</code> is used as the default format. The Simple
Features (<code>sf</code>) objects with polygons of London buildings and
linestrings of highways respectively contain</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span> <span class="op">(</span><span class="va">dat_B</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 1767</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span> <span class="op">(</span><span class="va">dat_H</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 1220</span></span></code></pre>
<p>… 1,759 building polygons and 1,133 highway lines.
<code>extract_osm_objects</code> also accepts <code>key-value</code>
pairs which are passed to the <a href="https://overpass-api.de" class="external-link">overpass
API</a> :</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_T</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"natural"</span>, value <span class="op">=</span> <span class="st">"tree"</span>, bbox <span class="op">=</span> <span class="va">bbox</span><span class="op">)</span></span></code></pre></div>
<p>Trees are located by single coordinates and are thus point
objects:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span> <span class="op">(</span><span class="va">dat_T</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "sfc_POINT" "sfc"</span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span> <span class="op">(</span><span class="va">dat_T</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 688</span></span></code></pre>
<div class="section level3">
<h3 id="osmdata">2.1 <code>osmdata</code><a class="anchor" aria-label="anchor" href="#osmdata"></a>
</h3>
<p>The <a href="https://cran.r-project.org/package=osmdata" class="external-link"><code>osmdata</code></a>
package provides a more powerful interface for downloading OSM data, and
may be used directly with <code>osmplotr</code>. The
<code>osmplotr</code> function <code>extract_osm_objects</code> is
effectively just a convenience wrapper around <code>omsdata</code>
functionality. The primary differences between the two are:</p>
<ol style="list-style-type: decimal">
<li>
<code>osmdata</code> returns <em>all</em> spatial data for a given
query; that is, <em>all</em> points, lines, polygons, multilines, and
multipolygons, while <code>osmplotr</code> returns a single specified
geometric type.</li>
<li>
<code>osmplotr</code> accepts multiple <code>key-value</code> pairs
in a single call to <code>extract_osm_objects</code>, which the
equivalent <code>osmdata</code> function, <code>add_feature</code>,
accepts only a single <code>key-value</code> pair, with queries
successively build through multiple calls to
<code>add_feature</code>.</li>
</ol>
<p>These differences are illustrated in the following code which
generates identical results in both cases (with namespaces explicitly
given to aid clarity),</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat1</span> <span class="op">&lt;-</span> <span class="fu">osmplotr</span><span class="fu">::</span><span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span></span>
<span>    key <span class="op">=</span> <span class="st">"highway"</span>, value <span class="op">=</span> <span class="st">"!primary"</span>,</span>
<span>    bbox <span class="op">=</span> <span class="va">bbox</span></span>
<span><span class="op">)</span></span>
<span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="fu">osmdata</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/osmdata/reference/opq.html" class="external-link">opq</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">bbox</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">add_feature</span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"highway"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">add_feature</span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"highway"</span>, value <span class="op">=</span> <span class="st">"!primary"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://docs.ropensci.org/osmdata/reference/osmdata_sf.html" class="external-link">osmdata_sf</a></span> <span class="op">(</span><span class="op">)</span></span>
<span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="va">dat2</span><span class="op">$</span><span class="va">osm_lines</span></span></code></pre></div>
<p>The <code>osmdata</code> function <code><a href="https://docs.ropensci.org/osmdata/reference/opq.html" class="external-link">opq()</a></code> constructs an
overpass query, with successive calls to <code>add_feature</code>
extending the query until it is finally submitted to overpass by
<code><a href="https://docs.ropensci.org/osmdata/reference/osmdata_sf.html" class="external-link">osmdata_sf()</a></code> (or the <code>sp</code> version
<code><a href="https://docs.ropensci.org/osmdata/reference/osmdata_sp.html" class="external-link">osmdata_sp()</a></code>).</p>
<p>Note that <code>add_feature()</code> has to be called twice in this
case, because a single call to
<code>add_feature (key = 'highway", value = "!primary")</code> would
request <em>all</em> features that are not primary highways. The initial
query for <code>key = "highway"</code> ensures that only npn-primary
highways are returned.</p>
</div>
<div class="section level3">
<h3 id="negation">2.2 Negation<a class="anchor" aria-label="anchor" href="#negation"></a>
</h3>
<p>As demonstrated above, negation can be specified by pre-pending
<code>!</code> to the <code>value</code> argument so that, for example,
all <code>natural</code> objects that are <strong>not</strong> trees can
be extracted with</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_NT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">bbox</span>, key <span class="op">=</span> <span class="st">"natural"</span>, value <span class="op">=</span> <span class="st">"!tree"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Cannot determine return type; maybe specify explicitly?</span></span></code></pre>
<p>The message is generated because of course a request for anything
that is not a tree could be for any kind of spatial object.
<code>osmplotr</code> makes several educated guesses in the absence of
specified return types, but these can always be forced with the
<code>return_type</code> parameter:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pts_NT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span></span>
<span>    bbox <span class="op">=</span> <span class="va">bbox</span>, key <span class="op">=</span> <span class="st">"natural"</span>, value <span class="op">=</span> <span class="st">"!tree"</span>,</span>
<span>    return_type <span class="op">=</span> <span class="st">"points"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><code>london$dat_H</code> contains all non-primary highways, and was
extracted with the call demonstrated above, while
<code>london$dat_HP</code> contains the corresponding set of exclusively
primary highways. An <code>osmplotr</code> request for
<code>key = "highway"</code> automatically returns line objects
(although, again, other kinds of objects may be forced through
specifying <code>return_type</code>).</p>
</div>
<div class="section level3">
<h3 id="additional-key-value-pairs">2.3 Additional <code>key-value</code> pairs<a class="anchor" aria-label="anchor" href="#additional-key-value-pairs"></a>
</h3>
<p>Any number of <code>key-value</code> pairs may be passed to
<code>extract_osm_objects</code>. For example, a named building can be
extracted with</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_bbox.html">get_bbox</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="op">-</span><span class="fl">0.13</span>, <span class="fl">51.50</span>, <span class="op">-</span><span class="fl">0.11</span>, <span class="fl">51.52</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">extra_pairs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"name"</span>, <span class="st">"Royal.Festival.Hall"</span><span class="op">)</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span></span>
<span>    key <span class="op">=</span> <span class="st">"building"</span>, extra_pairs <span class="op">=</span> <span class="va">extra_pairs</span>,</span>
<span>    bbox <span class="op">=</span> <span class="va">bbox</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>These data are stored in <code>london$dat_RFH</code>. Note that
periods or dots are used for white space, and in fact symbolise (in
<code>grep</code> terms) any character whatsoever. The polygon of a
building at a particular street address can be extracted with</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">extra_pairs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"addr:street"</span>, <span class="st">"Stamford.St"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"addr:housenumber"</span>, <span class="st">"150"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span></span>
<span>    key <span class="op">=</span> <span class="st">"building"</span>, extra_pairs <span class="op">=</span> <span class="va">extra_pairs</span>,</span>
<span>    bbox <span class="op">=</span> <span class="va">bbox</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>These data are stored as <code>london$dat_ST</code>. Note that
addresses generally require combining both <code>addr:street</code> with
<code>addr:housenumber</code>.</p>
</div>
<div class="section level3">
<h3 id="downloading-with-osm_structures-and-make_osm_map">2.4 Downloading with <code>osm_structures</code> and
<code>make_osm_map</code><a class="anchor" aria-label="anchor" href="#downloading-with-osm_structures-and-make_osm_map"></a>
</h3>
<p>The functions <code>osm_structures</code> and
<code>make_osm_map</code> aid both downloading multiple OSM data types
and plotting (with the latter described below).
<code>osm_structures</code> returns a <code>data.frame</code> of OSM
structure types, associated <code>key-value</code> pairs, unique
suffices which may be appended to data structures for storage purposes,
and suggested colours. Passing this list to <code>make_osm_map</code>
will return a list of the requested OSM data items, named through
combining the <code>dat_prefix</code> specified in
<code>make_osm_map</code> and the suffices specified in
<code>osm_structures</code>.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/osm_structures.html">osm_structures</a></span> <span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##     structure      key value suffix      cols</span></span>
<span><span class="co">## 1    building building           BU #646464FF</span></span>
<span><span class="co">## 2     amenity  amenity            A #787878FF</span></span>
<span><span class="co">## 3    waterway waterway            W #646478FF</span></span>
<span><span class="co">## 4       grass  landuse grass      G #64A064FF</span></span>
<span><span class="co">## 5     natural  natural            N #647864FF</span></span>
<span><span class="co">## 6        park  leisure  park      P #647864FF</span></span>
<span><span class="co">## 7     highway  highway            H #000000FF</span></span>
<span><span class="co">## 8    boundary boundary           BO #C8C8C8FF</span></span>
<span><span class="co">## 9        tree  natural  tree      T #64A064FF</span></span>
<span><span class="co">## 10 background                          gray20</span></span></code></pre>
<p>Many structures are identified by keys only, in which cases the
values are empty strings.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/osm_structures.html">osm_structures</a></span> <span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">value</span> <span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] ""      ""      ""      "grass"</span></span></code></pre>
<p>The last row of <code>osm_structures</code> exists only to define the
background colour of the map, as explained below (<a href="#id_4.3%20Automating%20map%20production">4.3 Automating map
production</a>).</p>
<p>The suffices include as many letters as are necessary to represent
all unique structure names. <code>make_osm_map</code> returns a list of
two components:</p>
<ol style="list-style-type: decimal">
<li>
<code>osm_data</code> containing the data objects passed in the
<code>osm_structures</code> argument. Any existing <code>osm_data</code>
may also be submitted to <code>make_osm_map</code>, in which case any
objects not present in the submitted data will be appended to the
returned version. If <code>osm_data</code> is not submitted, all objects
in <code>osm_structures</code> will be downloaded and returned.</li>
<li>
<code>map</code> containing the <code>ggplot2</code> map objects
with layers overlaid according to the sequence and colour schemes
specified in <code>osm_structures</code>
</li>
</ol>
<p>The data specified in <code>osm_structures</code> can then be
downloaded simply by calling:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_osm_map.html">make_osm_map</a></span> <span class="op">(</span>structures <span class="op">=</span> <span class="fu"><a href="../reference/osm_structures.html">osm_structures</a></span> <span class="op">(</span><span class="op">)</span>, bbox <span class="op">=</span> <span class="va">bbox</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span> <span class="op">(</span><span class="va">dat</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "osm_data" "map"</span></span></code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span> <span class="op">(</span><span class="va">dat</span>, <span class="va">class</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $osm_data</span></span>
<span><span class="co">## [1] "list"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $map</span></span>
<span><span class="co">## [1] "gg"     "ggplot"</span></span></code></pre>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span> <span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">osm_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "dat_BU" "dat_A"  "dat_W"  "dat_G"  "dat_N"  "dat_P"  "dat_H"  "dat_BO"</span></span>
<span><span class="co">## [9] "dat_T"</span></span></code></pre>
<p>The requested data are contained in <code>dat$osm_data</code>. A list
of desired structures can also be passed to this function, for
example,</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/osm_structures.html">osm_structures</a></span> <span class="op">(</span>structures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"building"</span>, <span class="st">"highway"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    structure      key value suffix      cols</span></span>
<span><span class="co">## 1   building building            B #646464FF</span></span>
<span><span class="co">## 2    highway  highway            H #000000FF</span></span>
<span><span class="co">## 3 background                          gray20</span></span></code></pre>
<p>Passing this to <code>make_osm_map</code> will download only these
two structures. Finally, note that the example of,</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/osm_structures.html">osm_structures</a></span> <span class="op">(</span>structures <span class="op">=</span> <span class="st">"grass"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    structure     key value suffix      cols</span></span>
<span><span class="co">## 1      grass landuse grass      G #64A064FF</span></span>
<span><span class="co">## 2 background                         gray20</span></span></code></pre>
<p>demonstrates that <code>osm_structures</code> converts a number of
common <code>keys</code> to OSM-appropriate <code>key-value</code>
pairs.</p>
<div class="section level4">
<h4 id="the-london-data-of-osmplotr">2.4.1 The <code>london</code> data of <code>osmplotr</code><a class="anchor" aria-label="anchor" href="#the-london-data-of-osmplotr"></a>
</h4>
<p>To illustrate the use of <code>osm_structures</code> to download
data, this section reproduces the code that was used to generate the
<code>london</code> data object which forms part of the
<code>osmplotr</code> package.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">structures</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span></span>
<span>    <span class="st">"highway"</span>, <span class="st">"highway"</span>, <span class="st">"building"</span>, <span class="st">"building"</span>, <span class="st">"building"</span>,</span>
<span>    <span class="st">"amenity"</span>, <span class="st">"park"</span>, <span class="st">"natural"</span>, <span class="st">"tree"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">structs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osm_structures.html">osm_structures</a></span> <span class="op">(</span>structures <span class="op">=</span> <span class="va">structures</span>, col_scheme <span class="op">=</span> <span class="st">"dark"</span><span class="op">)</span></span>
<span><span class="va">structs</span><span class="op">$</span><span class="va">value</span> <span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"!primary"</span></span>
<span><span class="va">structs</span><span class="op">$</span><span class="va">value</span> <span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"primary"</span></span>
<span><span class="va">structs</span><span class="op">$</span><span class="va">suffix</span> <span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"HP"</span></span>
<span><span class="va">structs</span><span class="op">$</span><span class="va">value</span> <span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"!residential"</span></span>
<span><span class="va">structs</span><span class="op">$</span><span class="va">value</span> <span class="op">[</span><span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"residential"</span></span>
<span><span class="va">structs</span><span class="op">$</span><span class="va">value</span> <span class="op">[</span><span class="fl">5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"commercial"</span></span>
<span><span class="va">structs</span><span class="op">$</span><span class="va">suffix</span> <span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"BNR"</span></span>
<span><span class="va">structs</span><span class="op">$</span><span class="va">suffix</span> <span class="op">[</span><span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"BR"</span></span>
<span><span class="va">structs</span><span class="op">$</span><span class="va">suffix</span> <span class="op">[</span><span class="fl">5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"BC"</span></span></code></pre></div>
<p>Suffices are generated automatically from structure names only, not
values, and the suffices for negated forms must therefore be specified
manually. The <code>london</code> data can then be downloaded by simply
calling <code>make_osm_map</code>:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">london</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_osm_map.html">make_osm_map</a></span> <span class="op">(</span>structures <span class="op">=</span> <span class="va">structs</span>, bbox <span class="op">=</span> <span class="va">bbox</span><span class="op">)</span><span class="op">$</span><span class="va">osm_data</span></span></code></pre></div>
<p>The requested data are contained in the <code>$osm_data</code> list
item. <code>make_osm_map</code> also returns a <code>$map</code> item
which is described below (see <a href="#id_4.3%20make-osm-map">4.3
Automating map production</a>).</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="downloading-connected-highways">3. Downloading connected highways<a class="anchor" aria-label="anchor" href="#downloading-connected-highways"></a>
</h2>
<p>The visualisation functions described in the second
<code>osmplotr</code> vignette (<a href="https://cran.r-project.org/package=osmplotr" class="external-link">Data maps</a>) enable
particular regions of maps to be highlighted. While it may often be
desirable to highlight regions according to a user’s own data,
<code>osmplotr</code> also enables regions to be defined by providing a
list of the names of encircling highways. The function which achieves
this is <code>connect_highways</code>, which returns a sequential matrix
of coordinates from those segments of the named highways which connected
continuously and sequentially to form a single enclosed space. An
example is,</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">highways</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span></span>
<span>    <span class="st">"Monmouth.St"</span>, <span class="st">"Short.?s.Gardens"</span>, <span class="st">"Endell.St"</span>, <span class="st">"Long.Acre"</span>,</span>
<span>    <span class="st">"Upper.Saint.Martin"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">highways1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_highways.html">connect_highways</a></span> <span class="op">(</span>highways <span class="op">=</span> <span class="va">highways</span>, bbox <span class="op">=</span> <span class="va">bbox</span><span class="op">)</span></span></code></pre></div>
<p>Note the use of the <a href="https://en.wikipedia.org/wiki/Regular_expression" class="external-link">regex</a>
character <code>?</code> which declares that the previous character is
optional. This matches both “Shorts Gardens” and “Short’s Gardens”, both
of which appear in OSM data.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span> <span class="op">(</span><span class="va">highways1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "list"</span></span></code></pre>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span> <span class="op">(</span><span class="va">highways1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 5</span></span></code></pre>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">highways1</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##                   lon      lat</span></span>
<span><span class="co">## 1678452807 -0.1270287 51.51370</span></span>
<span><span class="co">## 2265298898 -0.1270523 51.51362</span></span>
<span><span class="co">## 438170687  -0.1270865 51.51347</span></span>
<span><span class="co">## 3192197694 -0.1270902 51.51345</span></span>
<span><span class="co">## 9513062    -0.1271692 51.51288</span></span></code></pre>
<p>The extraction of bounding polygons from named highways is not
fail-safe, and may generate various warning messages. To understand the
kinds of conditions under which it may not work, it is useful to examine
<code>connect_highways</code> in more detail.</p>
<div class="section level3">
<h3 id="connect_highways-in-detail">3.1 <code>connect_highways</code> in detail<a class="anchor" aria-label="anchor" href="#connect_highways-in-detail"></a>
</h3>
<p><code>connect_highways</code> takes a list of OpenStreetMap highways
and sequentially connects closest nodes of adjacent highways until the
set of named highways connects to form a cycle. Cases where no circular
connection is possible generate an error message. The routine proceeds
through the three stages of,</p>
<ol style="list-style-type: decimal">
<li><p>Adding intersection nodes to junctions of ways where these don’t
already exist</p></li>
<li><p>Filling a connectivity matrix between the listed highways and
extracting the <strong>longest</strong> cycle connecting all of
them</p></li>
<li><p>Inserting extra connections between highways until the length of
the longest cycle is equal to <code>length (highways)</code>.</p></li>
</ol>
<p>This procedure can not be guaranteed fail-safe owing both to the
inherently unpredictable nature of OpenStreetMap, as well as to the
unknown relationships between named highways. To enable problematic
cases to be examined and hopefully resolved,
<code>connect_highways</code> has a <code>plot</code> option:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bbox_big</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_bbox.html">get_bbox</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="op">-</span><span class="fl">0.15</span>, <span class="fl">51.5</span>, <span class="op">-</span><span class="fl">0.10</span>, <span class="fl">51.52</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">highways</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span></span>
<span>    <span class="st">"Kingsway"</span>, <span class="st">"Holborn"</span>, <span class="st">"Farringdon.St"</span>, <span class="st">"Strand"</span>,</span>
<span>    <span class="st">"Fleet.St"</span>, <span class="st">"Aldwych"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">highway_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connect_highways.html">connect_highways</a></span> <span class="op">(</span></span>
<span>    highways <span class="op">=</span> <span class="va">highways</span>, bbox <span class="op">=</span> <span class="va">bbox_big</span>,</span>
<span>    plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: Cycle unable to be extended through all ways</span></span></code></pre>
<p><img src="basic-maps_files/figure-html/connect-highways-manual-plot-1.png" width="384"></p>
<p>The plot depicts each highway in a different colour, along with
numbers at start and end points of each segment. This plot reveals in
this case that highway#6 (“Aldwych”) is actually nested within two
components of highway#4 (“Strand”). <code>connect_highways</code>
searches for the shortest path connecting all named highways, and since
“Strand” connects to both highways#1 and #5, the shortest path excludes
#6. This exclusion of one of the named components generates the warning
message.</p>
<p>These connected polygons returned from <code>connect_highways</code>
can then be used to highlight the enclosed regions within maps, as
demonstrated in the second vignette, <a href="https://cran.r-project.org/package=osmplotr" class="external-link">‘Data Maps’</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="producing-maps">4. Producing maps<a class="anchor" aria-label="anchor" href="#producing-maps"></a>
</h2>
<p>Maps will generally contain multiple kinds of OSM data, for
example,</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_B</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"building"</span>, bbox <span class="op">=</span> <span class="va">bbox</span><span class="op">)</span></span>
<span><span class="va">dat_H</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"highway"</span>, bbox <span class="op">=</span> <span class="va">bbox</span><span class="op">)</span></span>
<span><span class="va">dat_T</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"natural"</span>, value <span class="op">=</span> <span class="st">"tree"</span>, bbox <span class="op">=</span> <span class="va">bbox</span><span class="op">)</span></span></code></pre></div>
<p>As illustrated above, plotting maps requires first making a basemap
with a specified background colour. Portions of maps can also be plotted
by creating a <code>basemap</code> with a smaller bounding box.</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bbox_small</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_bbox.html">get_bbox</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="op">-</span><span class="fl">0.13</span>, <span class="fl">51.51</span>, <span class="op">-</span><span class="fl">0.11</span>, <span class="fl">51.52</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osm_basemap.html">osm_basemap</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">bbox_small</span>, bg <span class="op">=</span> <span class="st">"gray20"</span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> <span class="op">(</span><span class="va">map</span>, <span class="va">dat_H</span>, col <span class="op">=</span> <span class="st">"gray70"</span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> <span class="op">(</span><span class="va">map</span>, <span class="va">dat_B</span>, col <span class="op">=</span> <span class="st">"gray40"</span><span class="op">)</span></span></code></pre></div>
<p><code>map</code> is then a <code>ggplot2</code> which may be viewed
simply by passing it to <code>print_osm_map</code>:</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></code></pre></div>
<p><img src="map_a2.png"></p>
<p>Other graphical parameters can also be passed to
<code>add_osm_objects</code>, such as border colours or line widths and
types. For example,</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osm_basemap.html">osm_basemap</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">bbox_small</span>, bg <span class="op">=</span> <span class="st">"gray20"</span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> <span class="op">(</span><span class="va">map</span>, <span class="va">dat_B</span>,</span>
<span>    col <span class="op">=</span> <span class="st">"gray40"</span>, border <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">0.2</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></code></pre></div>
<p><img src="map_a3.png"></p>
<p>The <code>size</code> argument is passed to the corresponding
<code>ggplot2</code> routine for plotting polygons, lines, or points,
and respectively determines widths of lines (for polygon outlines and
for lines), and sizes of points. The <code>col</code> argument
determines the fill colour of polygons, or the colour of lines or
points.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> <span class="op">(</span><span class="va">map</span>, <span class="va">dat_H</span>, col <span class="op">=</span> <span class="st">"gray70"</span>, size <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> <span class="op">(</span><span class="va">map</span>, <span class="va">dat_T</span>, col <span class="op">=</span> <span class="st">"green"</span>, size <span class="op">=</span> <span class="fl">2</span>, shape <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></code></pre></div>
<p><img src="map_a4.png"></p>
<p>Note also that the <code>shape</code> parameter determines the point
shape, for details of which see <code><a href="https://ggplot2.tidyverse.org/reference/aes_linetype_size_shape.html" class="external-link">?ggplot2::shape</a></code>. Also note
that plot order affects the final outcome, because components are
sequentially overlaid and thus the same map components plotted in a
different order will generally produce a different result.</p>
<div class="section level3">
<h3 id="saving-maps">4.1 Saving Maps<a class="anchor" aria-label="anchor" href="#saving-maps"></a>
</h3>
<p>The function <code><a href="../reference/print_osm_map.html">print_osm_map()</a></code> can be used to print either
to on-screen graphical devices or to graphics files (see, for example,
<code><a href="https://rdrr.io/r/grDevices/png.html" class="external-link">?png</a></code> for a list of possible graphics devices). Sizes and
resolutions of devices may be specified with the appropriate parameters.
Device dimensions are scaled by default to the proportions of the
bounding box (although this can be over-ridden).</p>
<p>A screen-based device simply requires</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></code></pre></div>
<p>while examples of writing higher resolution versions to files
include:</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span>,</span>
<span>    filename <span class="op">=</span> <span class="st">"map.png"</span>, width <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    units <span class="op">=</span> <span class="st">"in"</span>, dpi <span class="op">=</span> <span class="va">map_dpi</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span>,</span>
<span>    filename <span class="op">=</span> <span class="st">"map.eps"</span>, width <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>    units <span class="op">=</span> <span class="st">"px"</span>, dpi <span class="op">=</span> <span class="va">map_dpi</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span>, filename <span class="op">=</span> <span class="st">"map"</span>, device <span class="op">=</span> <span class="st">"jpeg"</span>, width <span class="op">=</span> <span class="fl">10</span>, units <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plotting-different-osm-structures">4.2 Plotting different OSM Structures<a class="anchor" aria-label="anchor" href="#plotting-different-osm-structures"></a>
</h3>
<p>The ability demonstrated above to use negation in
<code>extract-osm-objects</code> allows different kinds of the same
object to be visually contrasted, for example primary and non-primary
highways:</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_HP</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"highway"</span>, value <span class="op">=</span> <span class="st">"primary"</span>, bbox <span class="op">=</span> <span class="va">bbox</span><span class="op">)</span></span>
<span><span class="va">dat_H</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"highway"</span>, value <span class="op">=</span> <span class="st">"!primary"</span>, bbox <span class="op">=</span> <span class="va">bbox</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osm_basemap.html">osm_basemap</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">bbox_small</span>, bg <span class="op">=</span> <span class="st">"gray20"</span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> <span class="op">(</span><span class="va">map</span>, <span class="va">dat_H</span>, col <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> <span class="op">(</span><span class="va">map</span>, <span class="va">dat_HP</span>, col <span class="op">=</span> <span class="st">"gray80"</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></code></pre></div>
<p><img src="map_a5.png"></p>
<p>The additional <code>key-value</code> pairs demonstrated above (for
Royal Festival Hall, <code>dat_RFH</code> and 150 Stamford Street,
<code>dat_ST</code>) also demonstrated above allow for highly customised
maps in which distinct objects are plotting with different colour
schemes.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bbox_small2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_bbox.html">get_bbox</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="op">-</span><span class="fl">0.118</span>, <span class="fl">51.504</span>, <span class="op">-</span><span class="fl">0.110</span>, <span class="fl">51.507</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osm_basemap.html">osm_basemap</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">bbox_small2</span>, bg <span class="op">=</span> <span class="st">"gray95"</span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> <span class="op">(</span><span class="va">map</span>, <span class="va">dat_H</span>, col <span class="op">=</span> <span class="st">"gray80"</span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> <span class="op">(</span><span class="va">map</span>, <span class="va">dat_HP</span>, col <span class="op">=</span> <span class="st">"gray20"</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> <span class="op">(</span><span class="va">map</span>, <span class="va">dat_RFH</span>, col <span class="op">=</span> <span class="st">"orange"</span>, border <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> <span class="op">(</span><span class="va">map</span>, <span class="va">dat_ST</span>, col <span class="op">=</span> <span class="st">"skyblue"</span>, border <span class="op">=</span> <span class="st">"blue"</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></code></pre></div>
<p><img src="map_a7.png"></p>
</div>
<div class="section level3">
<h3 id="filling-within-boundary-lines">4.3 Filling within boundary lines<a class="anchor" aria-label="anchor" href="#filling-within-boundary-lines"></a>
</h3>
<p>Different portions of a map may sometimes be delineated by lines, for
example with coastlines which are always represented in OpenStreetMap as
lines. Plotting the water or land either side of a coastline in a single
block of colour requires the regions to be polygons, not lines.
<code>osmplotr</code> has a function <code><a href="../reference/osm_line2poly.html">osm_line2poly()</a></code> which
converts boundary lines extending beyond a given bounding box into
polygons encircling the perimeter of the bounding box. An example is
given in <code><a href="../reference/osm_line2poly.html">?osm_line2poly</a></code>, using both the
<code>osmdata</code> package to obtain the bounding box of a named
region, and the <code>magrittr</code> pipe operator.</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span> <span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/osmdata/" class="external-link">osmdata</a></span><span class="op">)</span></span>
<span><span class="va">bb</span> <span class="op">&lt;-</span> <span class="fu">osmdata</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/osmdata/reference/getbb.html" class="external-link">getbb</a></span> <span class="op">(</span><span class="st">"melbourne, australia"</span><span class="op">)</span></span>
<span><span class="va">coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> <span class="op">(</span></span>
<span>    bbox <span class="op">=</span> <span class="va">bb</span>, key <span class="op">=</span> <span class="st">"natural"</span>, value <span class="op">=</span> <span class="st">"coastline"</span>,</span>
<span>    return_type <span class="op">=</span> <span class="st">"line"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osm_line2poly.html">osm_line2poly</a></span> <span class="op">(</span><span class="va">coast</span>, bbox <span class="op">=</span> <span class="va">bb</span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osm_basemap.html">osm_basemap</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">bb</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> <span class="op">(</span><span class="va">coast</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, col <span class="op">=</span> <span class="st">"lightsteelblue"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="../reference/osm_line2poly.html">osm_line2poly()</a></code> function returns a list of two
<code>sf</code> polygons. For coastline, one of these will correspond to
water, one to land. In the preceding example, the first polygon is the
ocean, which is coloured in <code>"lightsteelblue"</code>. Users must
determine for themselves which polygon is to be plotted in which colour.
Note that <code><a href="../reference/osm_line2poly.html">osm_line2poly()</a></code> only accepts
<code>sf</code>-formatted data, and not <code>sp</code>.</p>
</div>
<div class="section level3">
<h3 id="automating-map-production">4.4 Automating map production<a class="anchor" aria-label="anchor" href="#automating-map-production"></a>
</h3>
<p>As indicated above (<a href="#id_2.4%20downloading2">2.4 Downloading
with <code>osm_structures</code> and <code>make_osm_map</code></a>), the
production of maps overlaying various type of OSM objects is facilitated
with <code>make_osm_map</code>. The structure of a map is defined by
<code>osm_structures</code> as described above.</p>
<p>Producing a map with customised data is as simple as,</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">structs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"highway"</span>, <span class="st">"building"</span>, <span class="st">"park"</span>, <span class="st">"tree"</span><span class="op">)</span></span>
<span><span class="va">structures</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osm_structures.html">osm_structures</a></span> <span class="op">(</span>structures <span class="op">=</span> <span class="va">structs</span>, col_scheme <span class="op">=</span> <span class="st">"light"</span><span class="op">)</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_osm_map.html">make_osm_map</a></span> <span class="op">(</span>structures <span class="op">=</span> <span class="va">structures</span>, bbox <span class="op">=</span> <span class="va">bbox_small</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">map</span><span class="op">)</span></span></code></pre></div>
<p><img src="map_a8.png"></p>
<p>Calling <code><a href="../reference/make_osm_map.html">make_osm_map()</a></code> downloads the requested
structures within the given <code>bbox</code> and returns a list of two
components, the first of which contains the downloaded data:</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span> <span class="op">(</span><span class="va">dat</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "osm_data" "map"</span></span></code></pre>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span> <span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">osm_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "dat_B" "dat_H" "dat_P" "dat_A" "dat_P" "dat_T"</span></span></code></pre>
<p>Pre-downloaded data may also be passed to
<code><a href="../reference/make_osm_map.html">make_osm_map()</a></code></p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_osm_map.html">make_osm_map</a></span> <span class="op">(</span></span>
<span>    structures <span class="op">=</span> <span class="va">structures</span>, osm_data <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">osm_data</span>,</span>
<span>    bbox <span class="op">=</span> <span class="va">bbox</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">map</span><span class="op">)</span></span></code></pre></div>
<p><img src="map_a9.png"></p>
<p>Note that omitting the bounding box argument (<code>bbox</code>)
produces a map with a bounding box is extracted as the
<strong>largest</strong> box spanning all objects in
<code>osm_data</code>. This may be considerably larger than the desired
boundaries, particularly because highways are returned by
<code>overpass</code> in their entirety, and will generally extend well
beyond the specified bounding box.</p>
<p>Finally, objects in maps are overlaid on the plot according to the
order of rows in <code>osm_structures</code>, with the single exception
that <code>background</code> is plotted first. This order can be readily
changed or restricted simply by submitting structures in a desired
order.</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">structs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"amenity"</span>, <span class="st">"building"</span>, <span class="st">"highway"</span>, <span class="st">"park"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/osm_structures.html">osm_structures</a></span> <span class="op">(</span><span class="va">structs</span>, col_scheme <span class="op">=</span> <span class="st">"light"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    structure      key value suffix      cols</span></span>
<span><span class="co">## 1    amenity  amenity            A #DCDCDCFF</span></span>
<span><span class="co">## 2   building building            B #C8C8C8FF</span></span>
<span><span class="co">## 3    highway  highway            H #969696FF</span></span>
<span><span class="co">## 4       park  leisure  park      P #C8DCC8FF</span></span>
<span><span class="co">## 5 background                          gray95</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="axes">4.5 Axes<a class="anchor" aria-label="anchor" href="#axes"></a>
</h3>
<p>Axes may be added to maps using the <code>add_axes</code> function.
In contrast to many <code>R</code> packages for producing maps, maps in
<code>osmplotr</code> fill the entire plotting space, and axes are added
<em>internal</em> to this space. The separate function for adding axes
allows them to be overlaid on top of all previous layers.</p>
<p>Axes added to a dark version of the previous map look like this:</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">structures</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osm_structures.html">osm_structures</a></span> <span class="op">(</span>structures <span class="op">=</span> <span class="va">structs</span>, col_scheme <span class="op">=</span> <span class="st">"dark"</span><span class="op">)</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_osm_map.html">make_osm_map</a></span> <span class="op">(</span></span>
<span>    structures <span class="op">=</span> <span class="va">structures</span>, osm_data <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">osm_dat</span>,</span>
<span>    bbox <span class="op">=</span> <span class="va">bbox_small</span></span>
<span><span class="op">)</span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_axes.html">add_axes</a></span> <span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">map</span>, colour <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></code></pre></div>
<p>Note that, as described above, <code>make_osm_map</code> returns a
list of two items: (i) potentially modified data (in
<code>$osm_data</code>) and (ii) the map object (in <code>$map</code>).
All other <code>add_</code> functions take a map object as one argument
and return the single value of the modified map object.</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></code></pre></div>
<p><img src="map_a10.png"></p>
<p>This map reveals that the axes and labels are printed above
semi-transparent background rectangles, with transparency controlled by
the <code>alpha</code> parameter. Axes are always plotted on the left
and lower side, but positions can be adjusted with the <code>pos</code>
parameter which specifies the positions of axes and labels relative to
entire plot device</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_axes.html">add_axes</a></span> <span class="op">(</span><span class="va">map</span>,</span>
<span>    colour <span class="op">=</span> <span class="st">"blue"</span>, pos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    fontsize <span class="op">=</span> <span class="fl">5</span>, fontface <span class="op">=</span> <span class="fl">3</span>, fontfamily <span class="op">=</span> <span class="st">"Times"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></code></pre></div>
<p><img src="map_a11.png"></p>
<p>The second call to <code>add_axes</code> overlaid additional axes on
a map that already had axes from the previous call. This call also
demonstrates how sizes and other font characteristics of text labels can
be specified.</p>
<p>Finally, the current version of <code>osmplotr</code> does not allow
text labels of axes to be rotated. (This is because the semi-transparent
underlays are generated with <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">ggplot2::geom_label</a></code> which
currently prevents rotation.)</p>
<p>Click on the following link to proceed to the second
<code>osmplotr</code> vignette: <a href="https://cran.r-project.org/package=osmplotr" class="external-link">Data maps</a></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>





  </body>
</html>
