<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>add_osm_surface — add_osm_surface • osmplotr</title><!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="add_osm_surface — add_osm_surface"><meta name="description" content="Adds a colour-coded surface of spatial objects (polygons, lines, or points
generated by extract_osm_objects to a graphics object
initialised with osm_basemap. The surface is spatially
interpolated between the values given in dat, which has to be a matrix
of data.frame of 3 columns (x, y, z), where (x,y) are (longitude,
latitude), and z are the values to be interpolated. Interpolation uses
spatstat.explore::Smooth.ppp, which applies a Gaussian kernel smoother
optimised to the given data, and is effectively non-parametric."><meta property="og:description" content="Adds a colour-coded surface of spatial objects (polygons, lines, or points
generated by extract_osm_objects to a graphics object
initialised with osm_basemap. The surface is spatially
interpolated between the values given in dat, which has to be a matrix
of data.frame of 3 columns (x, y, z), where (x,y) are (longitude,
latitude), and z are the values to be interpolated. Interpolation uses
spatstat.explore::Smooth.ppp, which applies a Gaussian kernel smoother
optimised to the given data, and is effectively non-parametric."><meta property="og:image" content="https://docs.ropensci.org/osmplotr/logo.png"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css"><script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">osmplotr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.5.006</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/osmplotr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>add_osm_surface</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/osmplotr/blob/master/R/add-osm-surface.R" class="external-link"><code>R/add-osm-surface.R</code></a></small>
      <div class="d-none name"><code>add_osm_surface.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Adds a colour-coded surface of spatial objects (polygons, lines, or points
generated by <code><a href="extract_osm_objects.html">extract_osm_objects</a></code> to a graphics object
initialised with <code><a href="osm_basemap.html">osm_basemap</a></code>. The surface is spatially
interpolated between the values given in <code>dat</code>, which has to be a matrix
of <code>data.frame</code> of 3 columns (x, y, z), where (x,y) are (longitude,
latitude), and z are the values to be interpolated. Interpolation uses
<code><a href="https://rdrr.io/pkg/spatstat.explore/man/Smooth.ppp.html" class="external-link">spatstat.explore::Smooth.ppp</a></code>, which applies a Gaussian kernel smoother
optimised to the given data, and is effectively non-parametric.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_osm_surface</span><span class="op">(</span></span>
<span>  <span class="va">map</span>,</span>
<span>  <span class="va">obj</span>,</span>
<span>  <span class="va">dat</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"idw"</span>,</span>
<span>  grid_size <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">heat.colors</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span>,</span>
<span>  <span class="va">bg</span>,</span>
<span>  <span class="va">size</span>,</span>
<span>  <span class="va">shape</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-map">map<a class="anchor" aria-label="anchor" href="#arg-map"></a></dt>
<dd><p>A <code>ggplot2</code> object to which the surface are to be added</p></dd>


<dt id="arg-obj">obj<a class="anchor" aria-label="anchor" href="#arg-obj"></a></dt>
<dd><p>An <code>sp</code> <code>SpatialPolygonsDataFrame</code> or
<code>SpatialLinesDataFrame</code> (list of polygons or lines) returned by
<code><a href="extract_osm_objects.html">extract_osm_objects</a></code></p></dd>


<dt id="arg-dat">dat<a class="anchor" aria-label="anchor" href="#arg-dat"></a></dt>
<dd><p>A matrix or data frame of 3 columns (x, y, z), where (x, y) are
(longitude, latitude), and z are the values to be interpolated</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Either <code>idw</code> (Inverse Distance Weighting as
<code><a href="https://rdrr.io/pkg/spatstat.explore/man/idw.html" class="external-link">spatstat.explore::idw</a></code>; default), <code>Gaussian</code> for kernel smoothing
(as <code><a href="https://rdrr.io/pkg/spatstat.explore/man/Smooth.ppp.html" class="external-link">spatstat.explore::Smooth.ppp</a></code>), or any other value to avoid
interpolation. In this case, <code>dat</code> must be regularly spaced in <code>x</code>
and <code>y</code>.</p></dd>


<dt id="arg-grid-size">grid_size<a class="anchor" aria-label="anchor" href="#arg-grid-size"></a></dt>
<dd><p>size of interpolation grid</p></dd>


<dt id="arg-cols">cols<a class="anchor" aria-label="anchor" href="#arg-cols"></a></dt>
<dd><p>Vector of colours for shading z-values (for example,
<code>terrain.colors (30)</code>)</p></dd>


<dt id="arg-bg">bg<a class="anchor" aria-label="anchor" href="#arg-bg"></a></dt>
<dd><p>If specified, OSM objects outside the convex hull surrounding
<code>dat</code> are plotted in this colour, otherwise they are included in the
interpolation (which will generally be inaccurate for peripheral values)</p></dd>


<dt id="arg-size">size<a class="anchor" aria-label="anchor" href="#arg-size"></a></dt>
<dd><p>Size argument passed to <code>ggplot2</code> (polygon, path, point)
functions: determines width of lines for (polygon, line), and sizes of
points.  Respective defaults are (0, 0.5, 0.5). If <code>bg</code> is provided and
<code>size</code> has 2 elements, the second determines the <code>size</code> of the
background objects.</p></dd>


<dt id="arg-shape">shape<a class="anchor" aria-label="anchor" href="#arg-shape"></a></dt>
<dd><p>Shape of lines or points, for details of which see
<code>?ggplot::shape</code>. If <code>bg</code> is provided and <code>shape</code> has 2
elements, the second determines the <code>shape</code> of the background objects.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>modified version of <code>map</code> to which surface has been added</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Points beyond the spatial boundary of <code>dat</code> are included in the surface
if <code>bg</code> is not given. In such cases, values for these points may exceed
the range of provided data because the surface will be extrapolated beyond
its domain.  Actual plotted values are therefore restricted to the range of
given values, so any extrapolated points greater or less than the range of
<code>dat</code> are simply set to the respective maximum or minimum values. This
allows the limits of <code>dat</code> to be used precisely when adding colourbars
with <code><a href="add_colourbar.html">add_colourbar</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="osm_basemap.html">osm_basemap</a></code>, <code><a href="add_colourbar.html">add_colourbar</a></code>.</p>
<p>Other maps-with-data:
<code><a href="add_osm_groups.html">add_osm_groups</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Get some data</span></span></span>
<span class="r-in"><span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_bbox.html">get_bbox</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="op">-</span><span class="fl">0.13</span>, <span class="fl">51.5</span>, <span class="op">-</span><span class="fl">0.11</span>, <span class="fl">51.52</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># dat_B &lt;- extract_osm_objects (key = 'building', bbox = bbox)</span></span></span>
<span class="r-in"><span><span class="co"># These data are also provided in</span></span></span>
<span class="r-in"><span><span class="va">dat_B</span> <span class="op">&lt;-</span> <span class="va">london</span><span class="op">$</span><span class="va">dat_BNR</span> <span class="co"># actuall non-residential buildings</span></span></span>
<span class="r-in"><span><span class="co"># Make a data surface across the map coordinates, and remove periphery</span></span></span>
<span class="r-in"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">5</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span> <span class="op">(</span><span class="va">bbox</span> <span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span>, <span class="va">bbox</span> <span class="op">[</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">]</span>, length.out <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span> <span class="op">(</span><span class="va">bbox</span> <span class="op">[</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">]</span>, <span class="va">bbox</span> <span class="op">[</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">]</span>, length.out <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span> <span class="op">(</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span> <span class="op">(</span><span class="va">x</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="va">n</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span> <span class="op">(</span><span class="va">y</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="va">n</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    z <span class="op">=</span> <span class="va">x</span> <span class="op">*</span> <span class="va">y</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="osm_basemap.html">osm_basemap</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">bbox</span>, bg <span class="op">=</span> <span class="st">"gray20"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu">add_osm_surface</span> <span class="op">(</span><span class="va">map</span>, <span class="va">dat_B</span>, dat <span class="op">=</span> <span class="va">dat</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">heat.colors</a></span> <span class="op">(</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If data do not cover the entire map region, then the peripheral remainder</span></span></span>
<span class="r-in"><span><span class="co"># can be plotted by specifying the 'bg' colour. First remove periphery from</span></span></span>
<span class="r-in"><span><span class="co"># 'dat':</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span> <span class="op">(</span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">x</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span> <span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">y</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span> <span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">dat</span> <span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span> <span class="op">(</span><span class="va">d</span> <span class="op">&lt;</span> <span class="fl">0.01</span><span class="op">)</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="osm_basemap.html">osm_basemap</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">bbox</span>, bg <span class="op">=</span> <span class="st">"gray20"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu">add_osm_surface</span> <span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">map</span>,</span></span>
<span class="r-in"><span>    <span class="va">dat_B</span>,</span></span>
<span class="r-in"><span>    dat <span class="op">=</span> <span class="va">dat</span>,</span></span>
<span class="r-in"><span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">heat.colors</a></span> <span class="op">(</span><span class="fl">30</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    bg <span class="op">=</span> <span class="st">"gray40"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Polygons and (lines/points) can be overlaid as data surfaces with different</span></span></span>
<span class="r-in"><span><span class="co"># colour schemes.</span></span></span>
<span class="r-in"><span><span class="co"># dat_HP &lt;- extract_osm_objects (key = 'highway',</span></span></span>
<span class="r-in"><span><span class="co">#                                value = 'primary',</span></span></span>
<span class="r-in"><span><span class="co">#                                bbox = bbox)</span></span></span>
<span class="r-in"><span><span class="co"># These data are also provided in</span></span></span>
<span class="r-in"><span><span class="va">dat_HP</span> <span class="op">&lt;-</span> <span class="va">london</span><span class="op">$</span><span class="va">dat_HP</span></span></span>
<span class="r-in"><span><span class="va">cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="adjust_colours.html">adjust_colours</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">heat.colors</a></span> <span class="op">(</span><span class="fl">30</span><span class="op">)</span>, adj <span class="op">=</span> <span class="op">-</span><span class="fl">0.2</span><span class="op">)</span> <span class="co"># darken by 20%</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu">add_osm_surface</span> <span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">map</span>,</span></span>
<span class="r-in"><span>    <span class="va">dat_HP</span>,</span></span>
<span class="r-in"><span>    <span class="va">dat</span>,</span></span>
<span class="r-in"><span>    cols <span class="op">=</span> <span class="va">cols</span>,</span></span>
<span class="r-in"><span>    bg <span class="op">=</span> <span class="st">"gray60"</span>,</span></span>
<span class="r-in"><span>    size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">1.5</span>, <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Adding multiple surfaces of either polygons or (lines/points) produces a</span></span></span>
<span class="r-in"><span><span class="co"># 'ggplot2' warning, and forces the colour gradient to revert to the last</span></span></span>
<span class="r-in"><span><span class="co"># given value.</span></span></span>
<span class="r-in"><span><span class="va">dat_T</span> <span class="op">&lt;-</span> <span class="va">london</span><span class="op">$</span><span class="va">dat_T</span> <span class="co"># trees</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="osm_basemap.html">osm_basemap</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">bbox</span>, bg <span class="op">=</span> <span class="st">"gray20"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu">add_osm_surface</span> <span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">map</span>,</span></span>
<span class="r-in"><span>    <span class="va">dat_B</span>,</span></span>
<span class="r-in"><span>    dat <span class="op">=</span> <span class="va">dat</span>,</span></span>
<span class="r-in"><span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">heat.colors</a></span> <span class="op">(</span><span class="fl">30</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    bg <span class="op">=</span> <span class="st">"gray40"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu">add_osm_surface</span> <span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">map</span>,</span></span>
<span class="r-in"><span>    <span class="va">dat_HP</span>,</span></span>
<span class="r-in"><span>    <span class="va">dat</span>,</span></span>
<span class="r-in"><span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">heat.colors</a></span> <span class="op">(</span><span class="fl">30</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    bg <span class="op">=</span> <span class="st">"gray60"</span>,</span></span>
<span class="r-in"><span>    size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">1.5</span>, <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu">add_osm_surface</span> <span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">map</span>,</span></span>
<span class="r-in"><span>    <span class="va">dat_T</span>,</span></span>
<span class="r-in"><span>    <span class="va">dat</span>,</span></span>
<span class="r-in"><span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">topo.colors</a></span> <span class="op">(</span><span class="fl">30</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    bg <span class="op">=</span> <span class="st">"gray70"</span>,</span></span>
<span class="r-in"><span>    size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">8</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span> <span class="co"># 'dat_HP' is in 'topo.colors' not 'heat.colors'</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add axes and colourbar</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="add_axes.html">add_axes</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="add_colourbar.html">add_colourbar</a></span> <span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">map</span>,</span></span>
<span class="r-in"><span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">heat.colors</a></span> <span class="op">(</span><span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    zlims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span> <span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">z</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    barwidth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">0.02</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    barlength <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">0.6</span>, <span class="fl">0.99</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    vertical <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="print_osm_map.html">print_osm_map</a></span> <span class="op">(</span><span class="va">map</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>





  </body></html>

